<body>
  <!-- Contenido principal -->
  <div id="tab1" class="tab-content active">
    <!-- Contenedor fluid sin height forzado -->
    <div class="container-fluid my-3">
      
      <!-- Fila 1: Mapa (izquierda) + Características Generales (derecha) -->
      <div class="row mb-4">
        
        <!-- Columna Izquierda (Mapa, etc.) -->
        <div class="col-md-6">
          <h2>Nacional</h2>
          <!-- Contenedor del mapa -->
          <!-- Cambiamos a min-height para que pueda crecer si el contenido lo requiere -->
          <div 
            id="mapContainer" 
            class="position-relative my-3"
            style="min-height: 500px;"  <!-- Se sugiere min-height en lugar de height -->
          >
            <button
              id="resetButton"
              class="btn btn-primary mt-2 d-none"
              style="position: absolute; top: 10px; left: 10px; z-index: 1000;"
            >
              <i class="bi bi-globe"></i> Ver mapa nacional
            </button>

            <!-- Retiramos h-100 de la fila interna -->
            <div class="row">
              <!-- Quitar style="height: 100%;" del mapColumn para permitir ajuste dinámico -->
              <div id="mapColumn" class="col-md-12">
                <!-- El mapa, si deseas una altura fija, puedes poner height: 500px directamente aquí -->
                <div 
                  id="map" 
                  style="width: 100%; height: 500px;"
                ></div>
              </div>

              <!-- detailsColumn sin "height: 100%" para que pueda crecer -->
              <div 
                id="detailsColumn" 
                class="col-md-6 d-none" 
                style="display: flex; flex-direction: column;"
              >
                <!-- Primera fila -->
                <div class="p-3 border flex-grow-1 bg-light">
                  <h3>Detalle 1</h3>
                  <div 
                    id="chart1" 
                    style="width: 100%; height: 100%;"
                  ></div>
                </div>

                <!-- Segunda fila -->
                <div class="p-3 border flex-grow-1 bg-light">
                  <h3>Detalle 2</h3>
                  <div 
                    id="chart2"
                    style="width: 100%; height: 100%;"
                  ></div>
                </div>

                <!-- Tercera fila -->
                <div class="p-3 border flex-grow-1 bg-light">
                  <h3>Detalle 3</h3>
                  <div 
                    id="chart3"
                    style="width: 100%; height: 100%;"
                  ></div>
                </div>
              </div>
            </div> <!-- .row -->
          </div> <!-- #mapContainer -->
        </div> <!-- .col-md-6 -->
        
        <!-- Columna Derecha (Características Generales) -->
        <div class="col-md-6 d-flex flex-column">
          <h2>Características generales</h2>
          <!-- Barra de selectores (generales) -->
          <div class="bg-primary text-white p-3 clearfix">
            <!-- Variable de interés -->
            <div style="float: left; width: 48%; margin-right: 2%">
              <label for="selectorGeneralesInteres" class="d-block">
                Variable de interés:
              </label>
              <select
                id="selectorGeneralesInteres"
                class="form-select form-select-sm w-100"
              >
                <option value="genero">Género</option>
                <option value="tamano_empresa_num_trab">Tamaño (N° trabajadores)</option>
                <option value="rango_ventas">Tamaño (Ventas anuales)</option>
                <option value="exportaciones">Exportaciones</option>
                <option value="exportaciones_porc_ingreso">Ingreso por exportaciones (%)</option>
                <option value="financiamiento">Financiamiento</option>
                <option value="internacionalizacion">Internacionalización</option>
              </select>
            </div>

            <!-- Nivel de análisis (Generales) -->
            <div style="float: left; width: 48%">
              <label for="selectorTecnoAnalisis" class="d-block">
                Nivel de análisis:
              </label>
              <select
                id="selectorTecnoAnalisis"
                class="form-select form-select-sm w-100"
              >
                <option value="nacional">Nacional</option>
                <option value="region">Regiones</option>
                <option value="cadena_productiva">Cadena Productiva</option>
                <option value="tipo_empresa">Tipo de empresa</option>
              </select>
            </div>
          </div>

          <!-- Contenedor del gráfico de características generales -->
          <div class="bg-white flex-grow-1" style="min-height: 400px;">
            <div 
              id="chartContainer" 
              class="w-100 h-100"
              style="border: none;"
            ></div>
            <button
              id="resetButton1"
              class="btn btn-secondary mt-2"
              style="display: none;"
            >
              Restablecer gráfico
            </button>
          </div>
        </div> <!-- .col-md-6 -->
      </div> <!-- .row -->

      <!-- Fila 2: Características tecnocreativas -->
      <div class="row">
        <div class="col-12 bg-light border d-flex flex-column">
          <h2>Características tecnocreativas</h2>

          <!-- Barra de selectores (tecnocreativas) -->
          <div class="bg-primary text-white p-3 clearfix">
            <!-- Variable de interés -->
            <div style="float: left; width: 48%; margin-right: 2%">
              <label for="selector2b" class="d-block">
                Variable de interés:
              </label>
              <select
                id="selector2b"
                class="form-select form-select-sm w-100"
              >
                <option value="agrupacion_tecnocreativa">Agrupación tecnocreativa</option>
                <option value="tecnologias">Uso de tecnología</option>
                <option value="herramientas_diferenciacion">Herramientas de diferenciación</option>
                <option value="interaccion">Interacción con otros sectores</option>
                <option value="tendencias">Tendencias tecnocreativas</option>
                <option value="brechas">Brechas y drivers</option>
              </select>
            </div>

            <!-- Nivel de análisis (Tecnocreativas) -->
            <div style="float: left; width: 48%">
              <label for="selector1b" class="d-block">
                Nivel de análisis:
              </label>
              <select
                id="selector1b"
                class="form-select form-select-sm w-100"
              >
                <option value="nacional">Nacional</option>
                <option value="region">Regiones</option>
                <option value="cadena_productiva">Cadena Productiva</option>
                <option value="tipo_empresa">Tipo de empresa</option>
              </select>
            </div>
          </div>

          <!-- Contenedor del segundo gráfico -->
          <div class="bg-white flex-grow-1" style="min-height: 400px;">
            <button
              id="resetButton2"
              class="btn btn-secondary mt-2"
              style="display: none;"
            >
              Restablecer gráfico
            </button>
            <div 
              id="chartContainer2" 
              class="w-100 h-100"
              style="border: none;"
            ></div>
          </div>
        </div>
      </div> <!-- .row -->
    </div> <!-- .container-fluid -->
  </div> <!-- #tab1 -->
</body>
